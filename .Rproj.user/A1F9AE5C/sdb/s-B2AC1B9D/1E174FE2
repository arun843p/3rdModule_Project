{
    "contents" : "run_analysis <- function() {\n        library(dplyr)\n        library(reshape2)\n        ##1.Merges the training and the test sets to create one data set.   \n        ####Reading Different Variables Names[There are total 561 Variables]\n        var_obs <- read.table(\"./data/features.txt\")\n        ####Reading Activity Lables\n        act_lab <- read.table(\"./data/activity_labels.txt\")        \n        ######Reading Training Data\n        train_df <- read_train_data(var_obs)        \n        ######Reading Test Data\n        test_df <- read_test_data(var_obs)        \n        ##Merge\n        main_df <- rbind(train_df,test_df)\n        main_tbl_df <- tbl_df(main_df) ####Data Frame as required by 1st part of Course Project\n        \n        \n        ##2.Extracts only the measurements on the mean and standard deviation for each measurement. \n        ####Generate Unique & Valid Column Names\n        valid_col <- make.names(names=names(main_tbl_df), unique=TRUE, allow_=TRUE)\n        colnames(main_tbl_df) <- valid_col        \n        ####Extract only those Columns which are either mean or standard deviation\n        req_col <- grep(\"mean|std\",valid_col,value=FALSE)        \n        main_tbl2 <- select(.data=main_tbl_df, 1,2,req_col) ####Data Frame as required by 2nd part of Course Project\n        \n        \n        ##3. Uses descriptive activity names to name the activities in the data set\n        main_tbl2 <- arrange(main_tbl2, Subject.ID, Activity.ID)\n        act_lab2 <- tbl_df(act_lab)\n        colnames(act_lab2) <- c(\"Activity.ID\",\"Activity\")\n        main_tdy1 <- left_join(main_tbl2,act_lab2, by=\"Activity.ID\")\n        main_tdy1 <- main_tdy1[,c(1,2,82,3:81)]\n        main_tdy1 <- select(main_tdy1, -Activity.ID) ####Data Frame as required by 3rd part of Course Project\n        \n        \n        ##4.Appropriately labels the data set with descriptive variable names\n        names(main_tdy1) <- gsub(\"..\",\".\",names(main_tdy1),fixed=TRUE)\n        main_tdy1 ####Data Frame as required by 4th part of Course Project\n        \n        \n        ##5.From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject.\n        ####Melting Data Frame on Variables\n        melt_tdy <- melt(main_tdy1,id=c(\"Subject.ID\",\"Activity\"),measure.vars=c(3:81))\n        ####Casting Data Frame for having means across all columns\n        tidy_df <- dcast(melt_tdy,Subject.ID+Activity~variable,mean) ####Data Frame as required by 5th part of Course Project\n        ##Cleaning up column names\n        names(tidy_df) <- gsub(\"..\",\".\",names(tidy_df),fixed=TRUE)\n        names(tidy_df) <- gsub(\"mean\",\"Mean\",names(tidy_df),fixed=TRUE)\n        names(tidy_df) <- gsub(\"std\",\"Std\",names(tidy_df),fixed=TRUE)\n        ####Removing dot at end of column name\n        names(tidy_df) <- gsub(\"\\\\.$\",\"\",names(tidy_df))\n        \n        tidy_df\n        \n        ###Following Write command was used ---here sep =\"\\t\" makes text file more readable\n        ###If we copy paste data fro msuch text files in excel (Win), it will be formatted automatically in columns\n        ##>##write.table(tidy_df, \"./Tidy_data_frame.txt\",row.name=FALSE,sep = \"\\t\")\n        \n        \n}\n\n\n\n###I could have created 1 function for reading data from either train folder or test\n###but created 2 different to keep it simple & more readable\n\n#Function for reading Training data set\nread_train_data <- function(var_obs){\n        ######Reading Training Data\n        ########Reading Sequence of Subject ID's for main observations table (Identifier of Person Carrying Samsung Galaxy SII)\n        \n        sub_id <- read.table(\"./data/train/subject_train.txt\")\n        ########Reading Sequence of Activity IDs for main observations table\n        act_id <- read.table(\"./data/train/y_train.txt\")\n        ########Reading All Observations for 561 variables\n        train_obs <- read.table(\"./data/train/X_train.txt\")\n        ########Combining three data sets to from complete data frame of Training set\n        train_df <- cbind(sub_id,act_id,train_obs)\n        ########Setting Right Column Names\n        colnames(train_df) <- c(\"Subject ID\",\"Activity ID\",as.character(var_obs$V2))\n        train_df\n        \n}\n\n#Function for reading Test data set\nread_test_data <- function(var_obs){\n        ######Reading Test Data\n        ########Reading Sequence of Subject ID's for main observations table (Identifier of Person Carrying Samsung Galaxy SII)\n        sub_id2 <- read.table(\"./data/test/subject_test.txt\")\n        ########Reading Sequence of Activity IDs for main observations table\n        act_id2 <- read.table(\"./data/test/y_test.txt\")\n        ########Reading All Observations for 561 variables\n        test_obs <- read.table(\"./data/test/X_test.txt\")\n        ########Combining three data sets to from complete data frame of Test set\n        test_df <- cbind(sub_id2,act_id2,test_obs)\n        ########Setting Right Column Names\n        colnames(test_df) <- c(\"Subject ID\",\"Activity ID\",as.character(var_obs$V2)) \n        test_df\n        \n        \n}\n",
    "created" : 1426963456639.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1983901263",
    "id" : "1E174FE2",
    "lastKnownWriteTime" : 1426965543,
    "path" : "C:/Users/arpurohit/Desktop/R/Working Directory/3rdModule_Project/run_analysis.R",
    "project_path" : "run_analysis.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}